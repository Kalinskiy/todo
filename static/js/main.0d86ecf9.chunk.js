(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{106:function(e,t,a){e.exports=a(136)},111:function(e,t,a){},112:function(e,t,a){},136:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),i=a.n(c);a(111),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(112);var o,s,l=a(184),u=a(176),d=a(177),f=a(178),p=a(169),m=a(139),b=a(172),v=a(180),k=a(181),h=a(179),g=a(17),E=a(10),j=a.n(E),C=a(21),y=a(30),O=a(85),T=a.n(O);!function(e){e[e.New=0]="New",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Draft=3]="Draft"}(o||(o={})),function(e){e[e.Low=0]="Low",e[e.Middle=1]="Middle",e[e.Hi=2]="Hi",e[e.Urgently=3]="Urgently",e[e.Later=4]="Later"}(s||(s={}));var w=T.a.create(Object(y.a)({baseURL:"https://social-network.samuraijs.com/api/1.1/"},{withCredentials:!0,headers:{"API-KEY":"bdb9022f-3466-40e1-957a-ab975d07c6cb"}})),x=function(){return w.get("todo-lists")},I=function(e){return w.post("todo-lists",{title:e})},A=function(e){return w.delete("todo-lists/".concat(e))},S=function(e,t){return w.put("todo-lists/".concat(e),{title:t})},L=function(e){return w.get("todo-lists/".concat(e,"/tasks"))},F=function(e,t){return w.delete("todo-lists/".concat(e,"/tasks/").concat(t))},P=function(e,t){return w.post("todo-lists/".concat(e,"/tasks"),{title:t})},N=function(e,t,a){return w.put("todo-lists/".concat(e,"/tasks/").concat(t),a)},D=function(e){return w.post("auth/login",e)},z=function(){return w.get("auth/me")},M=function(){return w.delete("auth/login")},H=function(e,t){e.messages.length?t($({error:e.messages[0]})):t($({error:"Some error occurred"})),t(Y({status:"failed"}))},q=function(e,t){t($({error:e.message}||{error:"some error occurred"})),t(Y({status:"failed"}))},B=a(31),R=Object(B.b)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedIn:function(e,t){e.isLoggedIn=t.payload.value}}}),U=R.reducer,J=R.actions.setIsLoggedIn,K=Object(B.b)({name:"app",initialState:{status:"idle",error:null,isInitialized:!1},reducers:{setAppStatusAC:function(e,t){e.status=t.payload.status},setAppErrorAC:function(e,t){e.error=t.payload.error},setAppIsInitialized:function(e,t){e.isInitialized=t.payload.value}}}),W=K.reducer,V=K.actions,Y=V.setAppStatusAC,$=V.setAppErrorAC,_=V.setAppIsInitialized,G=Object(B.b)({name:"todo",initialState:[],reducers:{removeTodolistAC:function(e,t){var a=e.findIndex((function(e){return e.id===t.payload.id}));a>-1&&e.splice(a,1)},addTodolistAC:function(e,t){e.unshift(Object(y.a)(Object(y.a)({},t.payload.todolist),{},{filter:"all",entityStatus:"idle"}))},changeTodolistTitleAC:function(e,t){var a=e.findIndex((function(e){return e.id===t.payload.id}));e[a].title=t.payload.title},setTodolistsAC:function(e,t){return t.payload.todolists.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{filter:"all",entityStatus:"idle"})}))},changeTodolistEntityStatusAC:function(e,t){var a=e.findIndex((function(e){return e.id===t.payload.id}));e[a].entityStatus=t.payload.entityStatus},changeTodolistFilterAC:function(e,t){var a=e.findIndex((function(e){return e.id===t.payload.id}));e[a].filter=t.payload.filter}}}),Q=G.reducer,X=G.actions,Z=X.removeTodolistAC,ee=X.addTodolistAC,te=X.changeTodolistTitleAC,ae=X.setTodolistsAC,ne=X.changeTodolistEntityStatusAC,re=X.changeTodolistFilterAC,ce=Object(B.b)({name:"tasks",initialState:{},reducers:{removeTaskAC:function(e,t){var a=e[t.payload.todolistId],n=a.findIndex((function(e){return e.id===t.payload.taskId}));a.splice(n,1)},addTaskAC:function(e,t){e[t.payload.todoListId].unshift(t.payload)},updateTaskAC:function(e,t){var a=e[t.payload.todolistId],n=a.findIndex((function(e){return e.id===t.payload.taskId}));a[n]=Object(y.a)(Object(y.a)({},a[n]),t.payload.model)},setTasksAC:function(e,t){e[t.payload.todolistId]=t.payload.tasks}},extraReducers:function(e){e.addCase(ee,(function(e,t){e[t.payload.todolist.id]=[]})),e.addCase(Z,(function(e,t){delete e[t.payload.id]})),e.addCase(ae,(function(e,t){t.payload.todolists.forEach((function(t){e[t.id]=[]}))}))}}),ie=ce.actions,oe=ie.removeTaskAC,se=ie.addTaskAC,le=ie.updateTaskAC,ue=ie.setTasksAC,de=ce.reducer,fe=function(e,t,a){return function(){var n=Object(C.a)(j.a.mark((function n(r,c){var i,o,s,l;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r(Y({status:"loading"})),i=c(),o=i.tasks[a].find((function(t){return t.id===e}))){n.next=6;break}return console.warn("task not found in the state"),n.abrupt("return");case 6:return s=Object(y.a)({deadline:o.deadline,description:o.description,priority:o.priority,startDate:o.startDate,title:o.title,status:o.status},t),n.prev=7,n.next=10,N(a,e,s);case 10:0===(l=n.sent).data.resultCode?(r(le({taskId:e,model:t,todolistId:a})),r(Y({status:"succeeded"}))):H(l.data,r),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(7),q(n.t0,r);case 17:case"end":return n.stop()}}),n,null,[[7,14]])})));return function(e,t){return n.apply(this,arguments)}}()},pe=a(173),me=a(138),be=a(40),ve=a(182),ke=a(170),he=r.a.memo((function(e){var t=Object(n.useState)(""),a=Object(be.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(null),s=Object(be.a)(o,2),l=s[0],u=s[1],d=function(){""!==c.trim()?(e.addItem(c),i("")):u("Title is required")};return r.a.createElement("div",null,r.a.createElement(ve.a,{variant:"outlined",error:!!l,value:c,onChange:function(e){i(e.currentTarget.value)},onKeyPress:function(e){null!==l&&u(null),13===e.charCode&&d()},label:"Title",helperText:l}),r.a.createElement(p.a,{color:"primary",onClick:d,disabled:e.disabled},r.a.createElement(ke.a,null)))})),ge=r.a.memo((function(e){var t=Object(n.useState)(!1),a=Object(be.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(e.value),s=Object(be.a)(o,2),l=s[0],u=s[1];return c?r.a.createElement(ve.a,{value:l,onChange:function(e){u(e.currentTarget.value)},autoFocus:!0,onBlur:function(){i(!1),e.onChange(l)}}):r.a.createElement("span",{onDoubleClick:function(){i(!0),u(e.value)}},e.value)})),Ee=a(171),je=a(186),Ce=r.a.memo((function(e){var t=Object(n.useCallback)((function(){return e.removeTask(e.task.id,e.todolistId)}),[e.task.id,e.todolistId]),a=Object(n.useCallback)((function(t){var a=t.currentTarget.checked;e.changeTaskStatus(e.task.id,a?o.Completed:o.New,e.todolistId)}),[e.task.id,e.todolistId]),c=Object(n.useCallback)((function(t){e.changeTaskTitle(e.task.id,t,e.todolistId)}),[e.task.id,e.todolistId]);return r.a.createElement("div",{key:e.task.id,className:e.task.status===o.Completed?"is-done":""},r.a.createElement(je.a,{checked:e.task.status===o.Completed,color:"primary",onChange:a}),r.a.createElement(ge,{value:e.task.title,onChange:c}),r.a.createElement(p.a,{onClick:t},r.a.createElement(Ee.a,null)))})),ye=r.a.memo((function(e){var t=Object(g.b)();Object(n.useEffect)((function(){var a,n=(a=e.id,function(){var e=Object(C.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Y({status:"loading"})),e.prev=1,e.next=4,L(a);case 4:n=e.sent,r=n.data.items,t(ue({tasks:r,todolistId:a})),t(Y({status:"succeeded"})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),q(e.t0,t);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}());t(n)}),[]),Object(n.useEffect)((function(){console.log(e.entityStatus)}),[e.entityStatus]);var a=Object(n.useCallback)((function(t){e.addTask(t,e.id)}),[e.addTask,e.id]),c=Object(n.useCallback)((function(t){e.changeTodolistTitle(e.id,t)}),[e.id,e.changeTodolistTitle]),i=Object(n.useCallback)((function(){return e.changeFilter("all",e.id)}),[e.id,e.changeFilter]),s=Object(n.useCallback)((function(){return e.changeFilter("active",e.id)}),[e.id,e.changeFilter]),l=Object(n.useCallback)((function(){return e.changeFilter("completed",e.id)}),[e.id,e.changeFilter]),u=e.tasks;return"active"===e.filter&&(u=e.tasks.filter((function(e){return e.status===o.New}))),"completed"===e.filter&&(u=e.tasks.filter((function(e){return e.status===o.Completed}))),r.a.createElement("div",null,r.a.createElement("h3",null,r.a.createElement(ge,{value:e.title,onChange:c}),r.a.createElement(p.a,{disabled:"loading"===e.entityStatus,onClick:function(){e.removeTodolist(e.id)}},r.a.createElement(Ee.a,null))),r.a.createElement(he,{addItem:a,disabled:"loading"===e.entityStatus}),r.a.createElement("div",null,u.map((function(t){return r.a.createElement(Ce,{key:t.id,task:t,todolistId:e.id,removeTask:e.removeTask,changeTaskTitle:e.changeTaskTitle,changeTaskStatus:e.changeTaskStatus})}))),r.a.createElement("div",{style:{paddingTop:"10px"}},r.a.createElement(b.a,{variant:"all"===e.filter?"outlined":"text",onClick:i,color:"default"},"All"),r.a.createElement(b.a,{variant:"active"===e.filter?"outlined":"text",onClick:s,color:"primary"},"Active"),r.a.createElement(b.a,{variant:"completed"===e.filter?"outlined":"text",onClick:l,color:"secondary"},"Completed")))})),Oe=a(14),Te=function(e){var t=e.demo,a=void 0!==t&&t,c=Object(g.c)((function(e){return e.todolists})),i=Object(g.c)((function(e){return e.tasks})),o=Object(g.c)((function(e){return e.auth.isLoggedIn})),s=Object(g.b)();Object(n.useEffect)((function(){s(function(){var e=Object(C.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Y({status:"loading"})),e.prev=1,e.next=4,x();case 4:a=e.sent,t(ae({todolists:a.data})),t(Y({status:"succeeded"})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),q(e.t0,t);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())}),[]);var l=Object(n.useCallback)((function(e,t){s(function(e,t){return function(){var a=Object(C.a)(j.a.mark((function a(n){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(Y({status:"loading"})),a.prev=1,a.next=4,F(t,e);case 4:a.sent,n(oe({taskId:e,todolistId:t})),n(Y({status:"succeeded"})),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),q(a.t0,n);case 12:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}()}(e,t))}),[]),u=Object(n.useCallback)((function(e,t){s(function(e,t){return function(){var a=Object(C.a)(j.a.mark((function a(n){var r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(Y({status:"loading"})),a.prev=1,a.next=4,P(t,e);case 4:0===(r=a.sent).data.resultCode?(n(se(r.data.data.item)),n(Y({status:"succeeded"}))):H(r.data,n),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),q(a.t0,n);case 11:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}()}(e,t))}),[]),d=Object(n.useCallback)((function(e,t,a){s(fe(e,{status:t},a))}),[]),f=Object(n.useCallback)((function(e,t,a){s(fe(e,{title:t},a))}),[]),p=Object(n.useCallback)((function(e,t){s(re({id:t,filter:e}))}),[]),m=Object(n.useCallback)((function(e){var t;s((t=e,function(){var e=Object(C.a)(j.a.mark((function e(a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(Y({status:"loading"})),a(ne({id:t,entityStatus:"loading"})),e.prev=2,e.next=5,A(t);case 5:e.sent,a(Z({id:t})),a(Y({status:"succeeded"})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),q(e.t0,a);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()))}),[]),b=Object(n.useCallback)((function(e,t){s(function(e,t){return function(){var a=Object(C.a)(j.a.mark((function a(n){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(Y({status:"loading"})),a.prev=1,a.next=4,S(e,t);case 4:a.sent,n(te({id:e,title:t})),n(Y({status:"succeeded"})),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),q(a.t0,n);case 12:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}()}(e,t))}),[]),v=Object(n.useCallback)((function(e){s(function(e){return function(){var t=Object(C.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(Y({status:"loading"})),t.prev=1,t.next=4,I(e);case 4:0===(n=t.sent).data.resultCode?(a(ee({todolist:n.data.data.item})),a(Y({status:"succeeded"}))):H(n.data,a),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),q(t.t0,a);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}(e))}),[s]);return!o||a?r.a.createElement(Oe.a,{to:"/login"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(pe.a,{container:!0,style:{padding:"20px"}},r.a.createElement(he,{addItem:v})),r.a.createElement(pe.a,{container:!0,spacing:3},c.map((function(e){var t=i[e.id];return r.a.createElement(pe.a,{item:!0,key:e.id},r.a.createElement(me.a,{style:{padding:"10px"}},r.a.createElement(ye,{id:e.id,title:e.title,entityStatus:e.entityStatus,tasks:t,removeTask:l,changeFilter:p,addTask:u,changeTaskStatus:d,filter:e.filter,removeTodolist:m,changeTaskTitle:f,changeTodolistTitle:b})))}))))},we=a(188),xe=a(185);function Ie(e){return r.a.createElement(xe.a,Object.assign({elevation:6,variant:"filled"},e))}function Ae(){var e=Object(g.b)(),t=Object(g.c)((function(e){return e.app.error})),a=r.a.useState(!0),n=Object(be.a)(a,2),c=(n[0],n[1]),i=function(t,a){"clickaway"!==a&&(c(!1),e($({error:null})))};return r.a.createElement(we.a,{open:null!==t,autoHideDuration:6e3,onClose:i},r.a.createElement(Ie,{onClose:i,severity:"error"},t))}var Se=a(189),Le=a(168),Fe=a(174),Pe=a(175),Ne=a(91),De=function(){var e=Object(g.b)(),t=Object(g.c)((function(e){return e.auth.isLoggedIn})),a=Object(Ne.a)({validate:function(e){return e.email?e.password?void 0:{password:"password required"}:{email:"email is required"}},initialValues:{email:"",password:"",rememberMe:!1},onSubmit:function(t){var a;e((a=t,function(){var e=Object(C.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Y({status:"loading"})),e.prev=1,e.next=4,D(a);case 4:0===(n=e.sent).data.resultCode?(t(J({value:!0})),t(Y({status:"succeeded"}))):H(n.data,t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),q(e.t0,t);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()))}});return t?r.a.createElement(Oe.a,{to:"/"}):r.a.createElement(pe.a,{container:!0,justify:"center"},r.a.createElement(pe.a,{item:!0,xs:4},r.a.createElement("form",{onSubmit:a.handleSubmit},r.a.createElement(Se.a,null,r.a.createElement(Le.a,null,r.a.createElement("p",null,"To log in get registered",r.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank"},"here")),r.a.createElement("p",null,"or use common test account credentials:"),r.a.createElement("p",null,"Email: free@samuraijs.com"),r.a.createElement("p",null,"Password: free")),r.a.createElement(Fe.a,null,r.a.createElement(ve.a,Object.assign({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.errors.email?r.a.createElement("div",null,a.errors.email):null,r.a.createElement(ve.a,Object.assign({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.errors.password?r.a.createElement("div",null,a.errors.password):null,r.a.createElement(Pe.a,{label:"Remember me",control:r.a.createElement(je.a,Object.assign({},a.getFieldProps("rememberMe"),{checked:a.values.rememberMe}))}),r.a.createElement(b.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))))};var ze=function(e){var t=e.demo,a=void 0!==t&&t,c=Object(g.b)();Object(n.useEffect)((function(){c(function(){var e=Object(C.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z();case 3:0===e.sent.data.resultCode&&t(J({value:!0})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),q(e.t0,t);case 10:return e.prev=10,t(_({value:!0})),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t){return e.apply(this,arguments)}}())}),[]);var i=Object(g.c)((function(e){return e.app.status})),o=Object(g.c)((function(e){return e.app.isInitialized})),s=Object(g.c)((function(e){return e.auth.isLoggedIn})),E=Object(n.useCallback)((function(){c(function(){var e=Object(C.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Y({status:"loading"})),e.prev=1,e.next=4,M();case 4:0===(a=e.sent).data.resultCode?(t(J({value:!1})),t(Y({status:"succeeded"}))):(H(a.data,t),t(Y({status:"failed"}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),q(e.t0,t);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[]);return o?r.a.createElement("div",{className:"App"},r.a.createElement(Ae,null),r.a.createElement(d.a,{position:"static"},r.a.createElement(f.a,null,r.a.createElement(p.a,{edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement(h.a,null)),r.a.createElement(m.a,{variant:"h6"},"News"),s&&r.a.createElement(b.a,{onClick:E,color:"inherit"},"Log-out")),"loading"===i&&r.a.createElement(v.a,null)),r.a.createElement(k.a,{fixed:!0},r.a.createElement(Oe.b,{exact:!0,path:"/",render:function(){return r.a.createElement(Te,{demo:a})}}),r.a.createElement(Oe.b,{path:"/login",render:function(){return r.a.createElement(De,null)}}))):r.a.createElement(l.a,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},r.a.createElement(u.a,null))},Me=a(24),He=a(52),qe=Object(Me.c)({tasks:de,todolists:Q,app:W,auth:U}),Be=Object(B.a)({reducer:qe,middleware:function(e){return e().prepend(He.a)}});window.store=Be;var Re=a(51);i.a.render(r.a.createElement(g.a,{store:Be},r.a.createElement(Re.a,null,r.a.createElement(ze,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[106,1,2]]]);
//# sourceMappingURL=main.0d86ecf9.chunk.js.map